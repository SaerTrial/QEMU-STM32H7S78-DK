#ifndef HW_STM32H7RSXX_RCC_H
#define HW_STM32H7RSXX_RCC_H

#include "hw/sysbus.h"
#include "qom/object.h"

#define STM32H7RSXX_RCC_CR 0x00
#define STM32H7RSXX_RCC_PLL_CFGR 0x2C
#define STM32H7RSXX_RCC_CFGR 0x10

#define STM32H7RSXX_RCC_AHB1_RSTR 0x80
#define STM32H7RSXX_RCC_AHB2_RSTR 0x84
#define STM32H7RSXX_RCC_AHB3_RSTR 0xA4
#define STM32H7RSXX_RCC_AHB4_RSTR 0x88
#define STM32H7RSXX_RCC_AHB5_RSTR 0x7C

#define STM32H7RSXX_RCC_APB1_RSTR1 0x90
#define STM32H7RSXX_RCC_APB1_RSTR2 0x94

#define STM32H7RSXX_RCC_APB2_RSTR 0x98

#define STM32H7RSXX_RCC_AHB1_ENR 0x138
#define STM32H7RSXX_RCC_AHB2_ENR 0x13C
#define STM32H7RSXX_RCC_AHB3_ENR 0x158
#define STM32H7RSXX_RCC_AHB4_ENR 0x140
#define STM32H7RSXX_RCC_AHB5_ENR 0x134


#define STM32H7RSXX_RCC_APB1_ENR1 0x148
#define STM32H7RSXX_RCC_APB1_ENR2 0x14C
#define STM32H7RSXX_RCC_APB2_ENR 0x150
#define STM32H7RSXX_RCC_APB4_ENR 0x154
#define STM32H7RSXX_RCC_APB5_ENR 0x144


#define STM32H7RSXX_RCC_AHB5_LPENR                    0x15C 
#define STM32H7RSXX_RCC_AHB1_LPENR                    0x160 
#define STM32H7RSXX_RCC_AHB2_LPENR                    0x164
#define STM32H7RSXX_RCC_AHB4_LPENR                    0x168
#define STM32H7RSXX_RCC_AHB3_LPENR                    0x16C
#define STM32H7RSXX_RCC_APB1_LPENR1                   0x170
#define STM32H7RSXX_RCC_APB1_LPENR2                   0x174
#define STM32H7RSXX_RCC_APB2_LPENR                    0x178
#define STM32H7RSXX_RCC_APB4_LPENR                    0x17C
#define STM32H7RSXX_RCC_APB5_LPENR                    0x180


#define STM32H7RSXX_RCC_BDCR 0x70
#define STM32H7RSXX_RCC_CSR 0x74

#define STM32H7RSXX_RCC_SSCGR 0x80
#define STM32H7RSXX_RCC_DCKCFGR 0x8C
#define STM32H7RSXX_RCC_CKGATENR 0x90
#define STM32H7RSXX_RCC_DCKCFGR2 0x94

#define STM32H7RSXX_RCC_TESTCR 0x200

#define STM32H7RSXX_RCC_NREGS ((STM32H7RSXX_RCC_TESTCR >> 2) + 1)
#define STM32H7RSXX_RCC_PERIPHERAL_SIZE 0x400
#define STM32H7RSXX_RCC_NIRQS (32 * 10) /* 32 bits per reg, 5 en/rst regs */

#define STM32H7RSXX_RCC_GPIO_IRQ_OFFSET 0

#define TYPE_STM32H7RSXX_RCC "stm32h7rsxx.rcc"

typedef struct STM32H7RSXXRccState STM32H7RSXXRccState;

DECLARE_INSTANCE_CHECKER(STM32H7RSXXRccState, STM32H7RSXX_RCC, TYPE_STM32H7RSXX_RCC)

#define NUM_GPIO_EVENT_IN_LINES 16

struct STM32H7RSXXRccState {
    SysBusDevice parent_obj;

    MemoryRegion mmio;

    uint32_t regs[STM32H7RSXX_RCC_NREGS];

    qemu_irq enable_irq[STM32H7RSXX_RCC_NIRQS];
    qemu_irq reset_irq[STM32H7RSXX_RCC_NIRQS];
};

#endif /* HW_STM32H7RSXX_RCC_H */
